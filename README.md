# Tileset Builder
A ZIP tileset texture importer & tile generator plugin for the Godot game engine (version 4.4). It can:
- Create standard 47-tile "blob" tileset textures from a ZIP file (containing tile images).
- Generate missing tiles by flipping, rotating or merging other tiles.
- Augment the tileset texture with an 88-tile slope tileset.
- Generate tileset resources with painted terrain and physics shapes. Supports the [better terrain](https://github.com/Portponky/better-terrain) plugin.

Each image in the ZIP corresponds to one tile. In order to be recognized, their filenames must conform to specific values (see the images below). Each tile can be provided as either a fully-finished image, or as a part image that will be used to build the tile at import time.

## Install Guide
1. Download the latest release from the 'Releases' page.
2. Create a folder called `Addons/TilesetBuilder`.
3. Extract the downloaded archive's contents to that folder.
4. Enable the plugin under `Project Settings` => `Plugins` => `Tileset Builder`.

## How to Use
After installing, create a ZIP file and fill it with image files, using the filenames in the images below.

The tile texture inspector contains two buttons:
- Export to file: saves the generated texture to a PNG file, so you can inspect or share it.
- Create tileset: creates a tileset resource from your texture, with default terrain and physics shapes already set up.

### Standard Tiles
This image shows you which tile each filename maps to:

![The tiles of a 47-tile blob tileset, and their identifiers.](TilesetReference.png)

For example, the file `archive.zip/NOOK_TR.png` would be used as the top-right outer corner tile.

### Slope Tiles
Normally, slopes will not be generated by the importer. However, if you include one of the following in your ZIP file, a slope block will be allocated below the standard tiles.

Note that slope autotiling will not work unless you use the [better terrain](https://github.com/Portponky/better-terrain) plugin, as Godot's default terrain system is quite limited.

The slope tile filenames are as follows:

![The slope tiles and their identifiers.](SlopeReference.png)

### Long Slope Tiles
Long slopes (or 2-by-1 slopes) use similar names to the slope tiles. These mostly work the same as regular 1-by-1 slopes with a few differences:
- All filenames must be prefixed with `LONG_`. So you use `LONG_LINK_TL` instead of `LINK_TL`.
- The main slopes are each divided into two tiles: `LONG_SLOPE_LOW_x` and `LONG_SLOPE_HI_x`, representing the bottom half and the top half respectively.

### User-Defined Tiles
You can add custom tiles by adding images with filenames that are not in the image above. These tiles are placed below the standard tileset area. When you generate a tileset resource, user-defined tiles will not get their terrain or physics shape painted.

## Tile Generation
Tiles can be loaded from a ZIP archive in four ways, in the following order:
1. If the tile is present in the ZIP: load it directly.
2. If its parts are present in the ZIP: construct it from parts.
3. If its parts can be derived from other parts: construct it from derived parts.
4. If possible, derive it from other loaded tiles in the tileset.

This allows you to make your archive as complex as it needs to be. Please view the `Demo` folder for various tileset examples.

### Parts
Often, you don't want a tile to be directly loaded from a single image, but instead use a foreground and background image. If you prefix your tile image with `PART_`, the importer will treat as a foreground image, which will get overlayed on top of a background image (which is always the `CENTER` tile). You can control the compositing process on a per-pixel basis using a `MASK_` image.

For example:

![The slope tiles and their identifiers.](Compositing.png)

Here, the `EDGE_T` tile is created by overlaying the `PART_EDGE_T` image over the `PART_CENTER` image. The `MASK_EDGE_T` controls how blending is done: white pixels replace the background pixels, while black pixels are alpha-blended with the background pixels.

Your tileset archives can have both prefab tiles and part images. If a tile has both a prefab image and part images available, then the prefab is always used (but the parts may still be used to generate other tiles).

## Planned Features
- 1-by-2 (tall) slopes.
- Adding support for tile variants.
- Making the generation process configurable in the import window: currently the process is completely fixed and untransparent, limiting its usefulness.

## Known Issues
When you create a tileset resource, delete it, and then create a different tileset with the same filename, the tileset window will still display the old tileset. Reloading the project fixes this.
